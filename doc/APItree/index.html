<html>
  <head>
	  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>DMA API</title>
		<link href="toc/style/github-bf51422f4bb36427d391e4b75a1daa083c2d840e.css" media="all" rel="stylesheet" type="text/css"/>
		<link href="toc/style/github2-d731afd4f624c99a4b19ad69f3083cd6d02b81d5.css" media="all" rel="stylesheet" type="text/css"/>
		<link href="toc/css/zTreeStyle/zTreeStyle.css" media="all" rel="stylesheet" type="text/css"/>
	  <style>
		pre {
		    counter-reset: line-numbering;
		    border: solid 1px #d9d9d9;
		    border-radius: 0;
		    background: #fff;
		    padding: 0;
		    line-height: 23px;
		    margin-bottom: 30px;
		    white-space: pre;
		    overflow-x: auto;
		    word-break: inherit;
		    word-wrap: inherit;
		}

		pre a::before {
		  content: counter(line-numbering);
		  counter-increment: line-numbering;
		  padding-right: 1em; /* space after numbers */
		  width: 25px;
		  text-align: right;
		  opacity: 0.7;
		  display: inline-block;
		  color: #aaa;
		  background: #eee;
		  margin-right: 16px;
		  padding: 2px 10px;
		  font-size: 13px;
		  -webkit-touch-callout: none;
		  -webkit-user-select: none;
		  -khtml-user-select: none;
		  -moz-user-select: none;
		  -ms-user-select: none;
		  user-select: none;
		}

		pre a:first-of-type::before {
		  padding-top: 10px;
		}

		pre a:last-of-type::before {
		  padding-bottom: 10px;
		}

		pre a:only-of-type::before {
		  padding: 10px;
		}

		.highlight { background-color: #ffffcc } /* RIGHT */
		</style>
  </head>
  <body>
	  <div>
				<div style='width:25%;'>
                    <ul class="ztree"
                        style="width: 326px; overflow: auto; position: fixed; z-index: 2147483647; border: 0px none; left: 0px; top: 0px; height: 969px;">
                        <li id="tree_1" class="level0" tabindex="0" hidefocus="true" treenode=""><span
                                id="tree_1_switch" title="" class="button level0 switch roots_docu"
                                treenode_switch=""></span><a id="tree_1_a" class="level0 curSelectedNode" treenode_a=""
                                                             onclick="" target="_blank" style=""
                                                             title="Table of Content"><span id="tree_1_ico" title=""
                                                                                            treenode_ico=""
                                                                                            class="button ico_docu"
                                                                                            style="width:0px;height:0px;"></span><span
                                id="tree_1_span">首页</span></a></li>
                        <li id="tree_2" class="level0" tabindex="0" hidefocus="true" treenode=""><span
                                id="tree_2_switch" title="" class="button level0 switch bottom_open"
                                treenode_switch=""></span><a id="tree_2_a" class="level0" treenode_a="" onclick=""
                                                             href="#1" target="_self" style="" title="1. 支持的环境"><span
                                id="tree_2_ico" title="" treenode_ico="" class="button ico_open"
                                style="width:0px;height:0px;"></span><span id="tree_2_span">1. 支持的环境</span></a>
                            <ul id="tree_2_ul" class="level0 " style="display:block">
                                <li id="tree_3" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_3_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_3_a" class="level1" treenode_a=""
                                                                     onclick="" href="#-1" target="_self" style=""
                                                                     title="1.1. 模块"><span id="tree_3_ico" title=""
                                                                                           treenode_ico=""
                                                                                           class="button ico_docu"
                                                                                           style="width:0px;height:0px;"></span><span
                                        id="tree_3_span">1.1. 模块</span></a></li>
                                <li id="tree_4" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_4_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_4_a" class="level1" treenode_a=""
                                                                     onclick="" href="./AssetManagement%20API.html" target="_self" style=""
                                                                     title="1.2. AssetManagement（资产管理）"><span
                                        id="tree_4_ico" title="" treenode_ico="" class="button ico_docu"
                                        style="width:0px;height:0px;"></span><span id="tree_4_span">1.2. AssetManagement（资产管理）</span></a>
                                </li>
                                <li id="tree_5" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_5_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_5_a" class="level1" treenode_a=""
                                                                     onclick="" href="./Merchant%20API.html" target="_self" style=""
                                                                     title="1.3. Merchant（商家）"><span id="tree_5_ico"
                                                                                                     title=""
                                                                                                     treenode_ico=""
                                                                                                     class="button ico_docu"
                                                                                                     style="width:0px;height:0px;"></span><span
                                        id="tree_5_span">1.3. Merchant（商家）</span></a></li>
                                <li id="tree_6" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_6_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_6_a" class="level1" treenode_a=""
                                                                     onclick="" href="./Message%20API.html" target="_self" style=""
                                                                     title="1.4. Message（消息）"><span id="tree_6_ico"
                                                                                                    title=""
                                                                                                    treenode_ico=""
                                                                                                    class="button ico_docu"
                                                                                                    style="width:0px;height:0px;"></span><span
                                        id="tree_6_span">1.4. Message（消息）</span></a></li>
                                <li id="tree_7" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_7_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_7_a" class="level1" treenode_a=""
                                                                     onclick="" href="./Passport%20API.html" target="_self" style=""
                                                                     title="1.5. Passport（身份认证）"><span id="tree_7_ico"
                                                                                                       title=""
                                                                                                       treenode_ico=""
                                                                                                       class="button ico_docu"
                                                                                                       style="width:0px;height:0px;"></span><span
                                        id="tree_7_span">1.5. Passport（身份认证）</span></a></li>
                                <li id="tree_8" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_8_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_8_a" class="level1" treenode_a=""
                                                                     onclick="" href="./Payment%20API.html" target="_self" style=""
                                                                     title="1.6. Payment（支付）"><span id="tree_8_ico"
                                                                                                    title=""
                                                                                                    treenode_ico=""
                                                                                                    class="button ico_docu"
                                                                                                    style="width:0px;height:0px;"></span><span
                                        id="tree_8_span">1.6. Payment（支付）</span></a></li>
                                <li id="tree_9" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_9_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_9_a" class="level1" treenode_a=""
                                                                     onclick="" href="./Storage%20API.html" target="_self" style=""
                                                                     title="1.7. Storage（存储）"><span id="tree_9_ico"
                                                                                                    title=""
                                                                                                    treenode_ico=""
                                                                                                    class="button ico_docu"
                                                                                                    style="width:0px;height:0px;"></span><span
                                        id="tree_9_span">1.7. Storage（存储）</span></a></li>
                                <li id="tree_10" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_10_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_10_a" class="level1" treenode_a=""
                                                                     onclick="" href="./Utility%20API.html" target="_self" style=""
                                                                     title="1.8. Utility（工具）"><span id="tree_10_ico"
                                                                                                    title=""
                                                                                                    treenode_ico=""
                                                                                                    class="button ico_docu"
                                                                                                    style="width:0px;height:0px;"></span><span
                                        id="tree_10_span">1.8. Utility（工具）</span></a></li>
										
										
                                <li id="tree_11" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_11_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_11_a" class="level1" treenode_a=""
                                                                     onclick="" href="./Node Sdk.html" target="_self" style=""
                                                                     title=""><span id="tree_11_ico"
                                                                                                   title=""
                                                                                                   treenode_ico=""
                                                                                                   class="button ico_docu"
                                                                                                   style="width:0px;height:0px;"></span><span
                                        id="tree_11_span">1.9. NDODE（节点数据管理）</span></a></li>
										
										
										  <li id="tree_13" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_13_switch" title="" class="button level1 switch center_docu"
                                        treenode_switch=""></span><a id="tree_11_a" class="level1" treenode_a=""
                                                                     onclick="" href="./Ticket API.html" target="_self" style=""
                                                                     title="1.10. Ticket（票务）"><span id="tree_11_ico"
                                                                                                   title=""
                                                                                                   treenode_ico=""
                                                                                                   class="button ico_docu"
                                                                                                   style="width:0px;height:0px;"></span><span
                                        id="tree_11_span">1.10. Ticket（票务）</span></a></li>
										
										
                                <li id="tree_12" class="level1" tabindex="0" hidefocus="true" treenode=""><span
                                        id="tree_12_switch" title="" class="button level1 switch bottom_docu"
                                        treenode_switch=""></span>
										<a id="tree_12_a" class="level1" treenode_a=""
                                                                     onclick="" href="./README.html" target="_self" style=""
                                                                     title="1.10. 环境配置"><span id="tree_12_ico" title=""
                                                                                              treenode_ico=""
                                                                                              class="button ico_docu"
                                                                                              style="width:0px;height:0px;"></span><span
                                        id="tree_12_span">1.11. 环境配置</span></a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
        <div id='readme' style='width:70%;margin-left:20%;'>
          	<article class='markdown-body'>
            	<p>﻿# DMA API</p>
<h2 id="-">支持的环境</h2>
<ul>
<li>java</li>
<li>Android</li>
<li>IOS</li>
</ul>
<h2 id="-">一、产品简介</h2>
<h3 id="1-">1、 产品概述</h3>
<p>DMA开放平台基于亦来云基础服务支持，将支付，智能合约，数据存储，数据营销通过接口的形式开放给第三方合作伙伴，帮助第三方合作伙伴快速创建具有区块链特性的应用。</p>
<h3 id="2-">2、 产品优势</h3>
<p> 通过接入DMA平台，开发人员无需详细了解区块链的工作原理，就能基于亦来云主链、DID侧链、ETH侧链开发去中心化应用。</p>
<h3 id="3-">3、 功能特性</h3>
<p> 通用型移动APP钱包，现支持ELA 主链钱包、DID侧链钱包、ETH侧链钱包</p>
<p> 去中心化存储</p>
<p> 合约模板丰富，包含ERC20合约模板、ERC721合约模板，ERC721模板中有 收费类模板，质押类模板、N元购模板、票券销售类模板等</p>
<h3 id="4-">4、 应用场景</h3>
<h4 id="4-1-">4.1 区块链钱包</h4>
<p>拥有一个区块链数字货币钱包，便象征着迈进区块链领域的大门。区块链去中心化特点可省去第三方中介环节，实现点对点的对接，在大大降低成本的同时，快速完成交易支付。</p>
<p>Elastos DMA 提供完善的Wallet（钱包）API服务。是对Wallet模块的封装，包含以太坊钱包功能封装、亦来云钱包封装。包含各类钱包创建，导出，查询余额，转账交易等。</p>
<h4 id="4-2-">4.2 发布纪念币</h4>
<p>使用ERC721合约发布的资产具有不可置换性，你可以赋予每个token独一无二的属性，开发者们可以开发一个纪念币相关的dApp。将值得纪念事情记录下来，发布你的专属纪念币。</p>
<h4 id="4-3-">4.3 票务应用</h4>
<p>ElastosDMA团队自主开发了ElastosDMA平台上的第一家去中心化电子商务体验商店——uptick。是一个由可信商家参与的，为设计师提供分账的，去中心化的电子商务dAPP，并将售卖商品的范围限定在精致的、有版权设计的一手文创类产品。</p>
<h4 id="4-4-">4.4 收费类活动应用</h4>
<p>收费类活动主要用于小型活动，活动类型为收费类活动，交易过程中用户支付的报名费用暂时存在托管合约作为质押，当会议举行时，现场经过举办方验票之后，费用才能进入举办方账户。</p>
<h4 id="4-5-">4.5 质押类活动应用</h4>
<p>质押活动，用户支付的费用暂时存在托管合约，当用户验票之后，用户报名活动的费用会退还到用户钱包，如果用户在活动结束前一直没有验票，此部分的报名费通过合约设置可归举办方所有或守约人均分。</p>
<h3 id="5-">5、基础术语</h3>
<table>
<thead>
<tr>
<th>名词</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>智能合约    Smart Contract</td>
<td>一种旨在以信息化方式传播、验证或执行合同的计算机协议。一个智能合约是一套以数字形式定义的承诺（promises），包括合约参与方可以在上面执行这些承诺的协议。智能合约允许在没有第三方的情况下进行可信交易，这些交易可追踪且不可逆转。</td>
</tr>
<tr>
<td>私钥    Private key</td>
<td>私钥是一组64位的16进制字符，通过私钥我们能够访问一个账户。用户需要保存好自己的私钥。</td>
</tr>
<tr>
<td>GasLimit</td>
<td>该交易的执行时使用gas的上限</td>
</tr>
<tr>
<td>GasPrice</td>
<td>交易发送者愿意支付的gas费用的价格。一个单位的gas表示了执行一个基本指令，例如一个计算步骤。</td>
</tr>
<tr>
<td>地址    address</td>
<td>钱包账户地址</td>
</tr>
<tr>
<td>助记词    Mnemonic</td>
<td>助记词由12-24个单词组成，助记词可以生成私钥。一个助记词可以生成无穷个私钥，可以理解成助记词是个树的根，这个根上可以长很多分支，每个叶子是一个私钥，Cobo钱包不同币种用的是不同的分支。这也是为何一个助记词可以管理HD账户下所有的钱包地址。</td>
</tr>
<tr>
<td>随机数    nonce</td>
<td>用于维护以太坊交易的随机数</td>
</tr>
<tr>
<td>交易    Transaction</td>
<td>区块链上的一个事务请求，用来承载具体业务操作数据的结构。区块链上所有针对世界状态的变化操作均是基于交易来完成的。</td>
</tr>
<tr>
<td>交易哈希    Transaction hash</td>
<td>交易上链成功后，产生的唯一哈希值。</td>
</tr>
<tr>
<td>交易回执    Transaction receipt</td>
<td>是交易的执行结果。区块链是异步的系统，交易执行后需要共识，与传统架构不同，不能直接返回交易执行是否成功，因此需在回执中查看最终交易结果。</td>
</tr>
<tr>
<td>节点信息    Node information</td>
<td>区块链节点的相关信息。一个区块链一般由多节点组成。</td>
</tr>
<tr>
<td>区块    Block</td>
<td>区块链上存储打包交易数据以及交易执行结果数据的一种组织形式。区块彼此之间通过前向的应用彼此链接形成区块链。 每个区块记录着上一个区块的哈希值、本区块中的交易集合、本区块的哈希等基础数据。</td>
</tr>
<tr>
<td>区块高度    Block height</td>
<td>区块高度，简称块高，用来识别区块在区块链中的位置，并据此找到和这个区块相关的所有基础属性和交易记录。</td>
</tr>
<tr>
<td>区块链技术    Blockchain</td>
<td>也被称之为分布式账本技术，是一种去中心化的分布式数据库技术，其特点是去中心化、公开透明、不可篡改、可信任。区块链的每笔数据，都会广播全网的区块链节点，每个节点都有全量的、一致的数据。</td>
</tr>
<tr>
<td>去中心化应用    Decentralized applications（DApp）</td>
<td>与传统中心化应用的主要区别是，DApp 通过客户端直接连接区块链节点，通过智能合约计算和访问数据，没有中心化的后端服务。</td>
</tr>
<tr>
<td>燃料    Gas</td>
<td>智能合约在虚拟机中执行计算和存储的消耗度量，通过燃料可防止一些恶意攻击和计算、存储的浪费。</td>
</tr>
</tbody>
</table>
<h2 id="-">二、发布说明</h2>
<p>2018.12.31 DMA 测试版</p>
<p>2019.6.30 DMA 稳定版 
更新了钱包SDK，Carrier离线消息</p>
<h2 id="-1"><strong>模块介绍</strong></h2>
<p><a href="./Utility%20API.html">Utility（工具）</a> API为开发者提供一些便捷工具类，方便开发者进行快速开发。</p>
<p><a href="./Wallet%20API.html">Wallet（钱包）</a> API是对Wallet模块的封装，包含以太坊钱包功能封装、亦来云(主链、DID侧链、ETH侧链)钱包封装。包含各类钱包创建，导出，查询余额，转账交易等。交易记录由于底层不提供，使用API形式提取，文档中提供ELA主链交易记录参考代码</p>
<p><a href="./AssetManagement%20API.html">AssetManagement（资产管理）</a> API是对AssetManagement模块的封装。使用AssetManagement API可完成对资产的管理、确权。发布合约资产需要使用此模块，目前提供721资产合约模板。</p>
<p><a href="./Merchant%20API.html">Merchant（商家）</a>  API是对Merchant模块进行的功能封装。提供一些通用的模板，供开发者使用。目前有以下三种模板：</p>
<p>MerchantService普通销售模板： 销售者创建资产，然后将资产授权给托管合约，进行上架销售。消费者通过托管合约购买资产。托管合约完成销售者资产与消费者资金进行交换的过程。解决双方信任问题。</p>
<p> ChargeActivityService收费活动模板： </p><p>活动发起者创建一次活动，发行一定数量的活动门票。然后将门票授权给托管合约进行上架出售。活动参与在通过托管合约购买活动门票，参与者付出的资金由托管合约进行保管。当活动结束后，活动发起者才能获得活动门票的资金。</p>
<p>PledgeActivityService  质押活动模板： 活动发起者创建一次活动，发行一定数量的活动门票。然后将门票授权给托管合约进行上架出售。活动参与在通过托管合约购买活动门票，参与者付出的资金由托管合约进行保管。活动开始前活动发起者校验到场者的门票id，并返回其支付的押金。未到场者押金在活动结束后转移到活动发起者地址。</p>


<p>   <a href="./Message%20API.html">Message（消息）</a>模块主要包装了Carrier消息功能，我们在开发过程中预置了Carrier离线接口，待Carrier离线消息SDK提供后，进行补充，其中借鉴了Hyper的消息封装代码。（message模块api目前只支持Android）</p>
<p><a href="./Passport%20API.html">Passport（身份认证）</a> API是对Passport模块进行的功能，Passport模块可完成对用户身份信息的管理。支持Map提交存储，支持查找所有属性，有效属性，过期属性，可删除属性，此交易需要使用DID侧链币作为GAS。</p>
<p>
<a href="./Payment%20API.html">Payment（支付）</a>模块主要是想完成法币到币的通道，将来大家也可以使用法币直接购买电子票，商家也可能实现数字货币到法币的提现。目前payment模块主要实现了文档中提到的功能，然而DMA的SDK并不具备开账号等运营的责任，交易过程中需要借助币币交易的第三方平台，我们预留下了接口，将来可随时对接Elastos认可的币币交易第三方支付。</p>
<p><a href="./Node Sdk.html">NodeSDK（节点数据管理）</a>Node SDK 调用节点服务，节点服务对节点上721资产定义的事件进行分析处理，为去中心化数据收集提供依据</p>

<p><a href="./Ticket API.html">Ticket </a>模块覆盖了通用的票务领域，目前可实现收费类型、免费类型、质押类型的票务资产的发行、售卖、转移、验票等。整个交易过程没有平台、三方的参与，使用智能合约完成去中心化的可信交易。我们站在通用票务领域的角度，设计了符合票务标准的数据结构，同时也为用户提供自定义属性设置的接口，方便应用扩展。</p>
<p><a href="./Storage%20API.html">Storage（存储）</a> API提供存储相关功能，目前对ipfs进行封装，使用请阅读文档。</p>


          	</article>
        </div>
		</div>
  </body>
</html>
<script type="text/javascript" src="toc/js/jquery-1.4.4.min.js"></script>
<script type="text/javascript" src="toc/js/jquery.ztree.all-3.5.min.js"></script>
<script type="text/javascript" src="toc/js/ztree_toc.js"></script>
<script type="text/javascript" src="toc_conf.js"></script>

<SCRIPT type="text/javascript" >
<!--
$(document).ready(function(){
    var css_conf = eval(markdown_panel_style);
    $('#readme').css(css_conf)
    
    var conf = eval(jquery_ztree_toc_opts);
		$('#tree').ztree_toc(conf);

		//$(".ztree li a").attr('target',"_blank");
});
//-->
</SCRIPT>